(function(j){j.dispatcher=function(a,b){if(!b){b=a;a=undefined}var d={},c;if(a&&a.a)for(c in a.a)d[c]=a.a[c];if(b)for(c in b)d[c]=b[c];c=function(p){var h={dispatcher:j.stacks.cascade([])},q=h.dispatcher.kernel=function(f){f||(f=j.stacks.serial([]));return function(g){if(g=="done")h.dispatcher=h.dispatcher.push(f,true);else return g._wrap?function(){var i=Array.prototype.slice.call(arguments,0);return g.exec(h.dispatcher,[f].concat(i))}:g._disp?function(){var i=Array.prototype.slice.call(arguments,
0);return g.apply(h.dispatcher,[f].concat(i))}:h.dispatcher.kernel(f.push(g))}},l,m,k,n="",o="";for(l in d){m=d[l];(function(f,g){g._disp=true;k=function(){var i=Array.prototype.slice.call(arguments,0);return q()(g).apply(h.dispatcher,i)};k._wrap=true;k.exec=function(i,r){return g.apply(i,r)};h.dispatcher[f]=k;n+="var "+f+" = state['dispatcher']."+f+";"})(l,m)}o+="var done='done';";eval(o+n+"("+p.toString()+")();");return h.dispatcher};c.a=d;return c};j.dispatcher.http=dispatcher({method:function(a,
b){return this.kernel(a.push(function(d,c){e.method==b?c(d):c.pass(d)}))},path:function(a,b){return this.kernel(a.push(function(d,c){e.path==b?c(d):c.pass(d)}))},host:function(a,b){return this.kernel(a.push(function(d,c){e.host==b?c(d):c.pass(d)}))},get:function(a,b){return this.kernel(a)(this.method)("get")(this.path)(b)},post:function(a,b){return this.kernel(a)(this.method)("post")(this.path)(b)},put:function(a,b){return this.kernel(a)(this.method)("put")(this.path)(b)},del:function(a,b){return this.kernel(a)(this.method)("delete")(this.path)(b)}})})(this);
