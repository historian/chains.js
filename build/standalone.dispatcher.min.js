(function(g){var h=function(c,b){b||(b=g.stacks.serial([]));return function(a){if(a=="done")c.push(b,true);else return a._wrap?function(){var d=Array.prototype.slice.call(arguments,0);return a.exec(c,[b].concat(d))}:a._disp?function(){var d=Array.prototype.slice.call(arguments,0);return a.apply(c,[b].concat(d))}:c.kernel(b.push(a))}},i=function(c,b){var a,d="";d+="(function(){";d+="var done='done';";for(a in c)d+="var "+a+" = this."+a+";";d+="(";d+=b.toString();d+=")();});";return eval(d)},k=function(c,
b){b._disp=true;var a=function(){var d=Array.prototype.slice.call(arguments,0),f=arguments.callee.dispatcher,j=arguments.callee.helper;return h(f)(j).apply(f,d)};a._wrap=true;a.dispatcher=c;a.helper=b;a.exec=function(d,f){return this.helper.apply(d,f)};return a},l=function(c,b){var a,d;for(a in b){d=b[a];c[a]=k(c,d)}},m=function(c,b){var a=g.stacks.cascade([]),d=function(f){return h(arguments.callee.dispatcher,f)};d.dispatcher=a;a.kernel=d;l(a,c);i(c,b).call(a);return a},n=function(c){var b=function(a){return m(arguments.callee.helpers,
a)};b.helpers=c;return b};g.dispatcher=function(c,b){if(!b){b=c;c=undefined}var a={},d;if(c&&c.helpers)for(d in c.helpers)a[d]=c.helpers[d];if(b)for(d in b)a[d]=b[d];return n(a)};var o=g.dispatcher;g.dispatcher.http=o({method:function(c,b){return this.kernel(c.push(function(a,d){e.method==b?d(a):d.pass(a)}))},path:function(c,b){return this.kernel(c.push(function(a,d){e.path==b?d(a):d.pass(a)}))},host:function(c,b){return this.kernel(c.push(function(a,d){e.host==b?d(a):d.pass(a)}))},get:function(c,
b){return this.kernel(c)(this.method)("get")(this.path)(b)},post:function(c,b){return this.kernel(c)(this.method)("post")(this.path)(b)},put:function(c,b){return this.kernel(c)(this.method)("put")(this.path)(b)},del:function(c,b){return this.kernel(c)(this.method)("delete")(this.path)(b)}})})(this);
