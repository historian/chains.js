(function(m){var n;m.stacks={};m.stacks.sync=function(j){return function(c,g){g(j.call(this,c))}};m.stacks.serial=function(){var j,c,g,k;j=function(a){if(a.a.length==0)a.e&&a.e.call(this,a.b);else{var b=a.a.shift(),d=n(this,a,function(e){if(e.f)e.a=[];j.call(this,e)});b.call(this,a.b,d)}};c=function(a){var b={a:[]};for(i in _state.a)b.a[i]=a.a[i];a=function(d,e){var h={a:[],b:d,e:e},f;for(f in b.a)h.a[f]=b.a[f];j.call(this,h)};a.c=b;a.toString=g;a.push=k;return a};g=function(){return"serial:["+this.c.a.toString()+
"]"};k=function(a){var b=c(this.c);b.c.a.push(a);return b};return function(a){return c({a:a})}}();m.stacks.parallel=function(){var j,c,g,k;j=function(a,b){var d=n(this,b,function(e){e.length-=1;e.length==0&&e.e&&e.e.call(this,e.b)});a.call(this,b.b,d)};c=function(a){var b={a:[]};for(i in _state.a)b.a[i]=a.a[i];a=function(d,e){var h={a:{},b:d,e:e},f;h.length=b.a.length;for(f in b.a)h.a[f]=b.a[f];for(f in h.a)j.call(this,h.a[f],h)};a.c=b;a.toString=g;a.push=k;return a};g=function(){return"parallel:["+
this.c.a.toString()+"]"};k=function(a){var b=c(this.c);b.c.a.push(a);return b};return function(a){return c({a:a})}}();m.stacks.cascade=function(){var j={};j.d=arguments.length==1&&arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments,0);var c,g;c=function(a,b,d,e){function h(l){g.call(f,"done",l||d,e)}var f=this;h.pass=function(l){g.call(f,b,l||d,e)};a.call(f,d,h)};g=function(a,b,d){if(a=="done")d&&d.call(this,b);else if(a.length==0)d&&d.pass&&d.pass(b);else c.call(this,a.shift(),
a,b,d)};var k;k=function(a){function b(e,h){var f=[],l;for(l in d.d)f[l]=d.d[l];g.call(this,f,e,h)}var d={d:[]};for(i in a.d)d.d[i]=a.d[i];b.c=d;b.toString=function(){return"cascade:["+b.c.d.toString()+"]"};b.push=function(e,h){if(h){d.d.push(e);return this}else{var f=k(d);f.c.d.push(e);return f}};return b};return k(j)};n=function(j,c,g){function k(a){c.b=a||c.b;c.f=false;g.call(j,c)}k.pass=function(a){c.b=a||c.b;c.f=true;c.e&&c.e.pass?c.e.pass(c.b):g.call(j,c)};return k}})(this);
