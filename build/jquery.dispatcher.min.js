(function(f){function j(d){function c(b){return k(arguments.callee.a,b)}c.a=d;return c}function k(d,c){function b(g){return h(arguments.callee.b,g)}var a=f.stacks.cascade([]);b.b=a;a.kernel=b;l(a,d);m(d,c).call(a);return a}function l(d,c){var b,a;for(b in c){a=c[b];d[b]=n(d,a)}}function n(d,c){function b(){var a=Array.prototype.slice.call(arguments,0),g=arguments.callee.b,o=arguments.callee.c;return h(g)(o).apply(g,a)}c.d=true;b.e=true;b.b=d;b.c=c;b.exec=function(a,g){return this.c.apply(a,g)};return b}
function m(d,c){var b,a="";a+="(function(){";a+="var done='done';";for(b in d)a+="var "+b+" = this."+b+";";a+="(";a+=c.toString();a+=")();});";return eval(a)}function h(d,c){c||(c=f.stacks.serial([]));return function(b){if(b=="done")d.push(c,true);else return b.e?function(){var a=Array.prototype.slice.call(arguments,0);return b.exec(d,[c].concat(a))}:b.d?function(){var a=Array.prototype.slice.call(arguments,0);return b.apply(d,[c].concat(a))}:d.kernel(c.push(b))}}f.dispatcher=function(d,c){if(!c){c=
d;d=undefined}var b={},a;if(d&&d.a)for(a in d.a)b[a]=d.a[a];if(c)for(a in c)b[a]=c[a];return j(b)};var i=f.dispatcher;f.dispatcher.http=i({method:function(d,c){return this.kernel(d.push(function(b,a){e.method==c?a(b):a.pass(b)}))},path:function(d,c){return this.kernel(d.push(function(b,a){e.path==c?a(b):a.pass(b)}))},host:function(d,c){return this.kernel(d.push(function(b,a){e.host==c?a(b):a.pass(b)}))},get:function(d,c){return this.kernel(d)(this.method)("get")(this.path)(c)},post:function(d,c){return this.kernel(d)(this.method)("post")(this.path)(c)},
put:function(d,c){return this.kernel(d)(this.method)("put")(this.path)(c)},del:function(d,c){return this.kernel(d)(this.method)("delete")(this.path)(c)}});f.dispatcher.body=i({body_class:function(d,c){return this.kernel(d.push(function(b,a){f("body").f(c)?a(b):a.pass(b)}))},body_id:function(d,c){return this.kernel(d.push(function(b,a){f("body")[0].id==c?a(b):a.pass(b)}))},body:function(d,c){return this.kernel(d.push(function(b,a){f("body").first().filter(c).length>0?a(b):a.pass(b)}))}})})(jQuery);
