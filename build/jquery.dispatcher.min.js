(function(i){i.dispatcher=function(b,c){if(!c){c=b;b=undefined}var d={},a;if(b&&b.a)for(a in b.a)d[a]=b.a[a];if(c)for(a in c)d[a]=c[a];a=function(p){var h={dispatcher:i.stacks.cascade([])},q=h.dispatcher.kernel=function(f){f||(f=i.stacks.serial([]));return function(g){if(g=="done")h.dispatcher=h.dispatcher.push(f,true);else return g._wrap?function(){var j=Array.prototype.slice.call(arguments,0);return g.exec(h.dispatcher,[f].concat(j))}:g._disp?function(){var j=Array.prototype.slice.call(arguments,
0);return g.apply(h.dispatcher,[f].concat(j))}:h.dispatcher.kernel(f.push(g))}},l,m,k,n="",o="";for(l in d){m=d[l];(function(f,g){g._disp=true;k=function(){var j=Array.prototype.slice.call(arguments,0);return q()(g).apply(h.dispatcher,j)};k._wrap=true;k.exec=function(j,r){return g.apply(j,r)};h.dispatcher[f]=k;n+="var "+f+" = state['dispatcher']."+f+";"})(l,m)}o+="var done='done';";eval(o+n+"("+p.toString()+")();");return h.dispatcher};a.a=d;return a};i.dispatcher.http=dispatcher({method:function(b,
c){return this.kernel(b.push(function(d,a){e.method==c?a(d):a.pass(d)}))},path:function(b,c){return this.kernel(b.push(function(d,a){e.path==c?a(d):a.pass(d)}))},host:function(b,c){return this.kernel(b.push(function(d,a){e.host==c?a(d):a.pass(d)}))},get:function(b,c){return this.kernel(b)(this.method)("get")(this.path)(c)},post:function(b,c){return this.kernel(b)(this.method)("post")(this.path)(c)},put:function(b,c){return this.kernel(b)(this.method)("put")(this.path)(c)},del:function(b,c){return this.kernel(b)(this.method)("delete")(this.path)(c)}});
i.dispatcher.body=dispatcher({body_class:function(b,c){return this.kernel(b.push(function(d,a){i("body").c(c)?a(d):a.pass(d)}))},body_id:function(b,c){return this.kernel(b.push(function(d,a){i("body")[0].id==c?a(d):a.pass(d)}))},body:function(b,c){return this.kernel(b.push(function(d,a){i("body").b().filter(c).length>0?a(d):a.pass(d)}))}})})(jQuery);
